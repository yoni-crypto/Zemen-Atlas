<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zemen Atlas</title>
  <link rel="icon" type="image/png" href="./logo2.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="./styles.css">
  <link rel="stylesheet" href="./map/header.css">
  <link rel="stylesheet" href="./map/details-panel.css">
  <link rel="stylesheet" href="./map/list-panel.css">
  <link rel="stylesheet" href="./map/atlas-widget.css">
  <link rel="stylesheet" href="./map/timeline.css">
  <link rel="stylesheet" href="./auth/auth.css">
</head>

<body class="bg-[#1a1a1a] overflow-hidden">
  <div id="app-root" class="h-screen w-screen flex flex-col">
    <header id="app-header" class="app-header">
      <div class="header-left">
        <div class="logo-container">
          <img src="./logo2.png" alt="Zemen Atlas" class="logo-image">
          <span class="logo-text">Zemen <span class="logo-accent">Atlas</span></span>
        </div>

        <nav class="nav-menu">
        <a href="./" class="nav-link active">Map View</a>
        <a href="./history/" class="nav-link">History View</a>
        <a href="./store/" class="nav-link">Store</a>
        <a href="./orders/" class="nav-link" style="display: none;">Orders</a>
        </nav>
        <div></div>
      </div>

      <div class="header-right">
        <button id="cart-btn" class="header-btn" onclick="window.location.href='./cart/'">
          Cart (<span id="cart-count">0</span>)
        </button>
        <div class="user-avatar" id="user-avatar" onclick="handleUserClick()">
          Login
        </div>
      </div>
    </header>

    <main class="flex-1 relative mt-16">
      <div id="map" class="absolute inset-0 z-0"></div>



      <aside id="details-panel" class="details-panel hidden">
        <div class="details-panel-header">
          <div class="details-panel-tabs">
            <button data-panel-tab="summary" class="details-panel-tab active">
              Summary
            </button>
            <button data-panel-tab="wikipedia" class="details-panel-tab inactive">
              Wikipedia
            </button>
          </div>
          <button id="details-close" class="details-panel-close">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <div class="details-panel-content" id="details-content">
          <div class="details-panel-default">
            <p>Select a ruler or region on the map to see details.</p>
          </div>
        </div>
      </aside>

      <aside id="list-panel" class="list-panel">
        <div class="list-panel-header">
          <h2 class="list-panel-title" id="list-panel-title">All Places</h2>
        </div>

        <div class="list-panel-content" id="list-content">
        </div>
      </aside>

      <section id="atlas-widget" class="atlas-widget">
        <div class="atlas-header">
          <span>Zemen Atlas - Ethiopia Explorer</span>
        </div>

        <div class="atlas-tabs">
          <button data-atlas-tab="places" class="atlas-tab active">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span class="atlas-tab-text">Places</span>
          </button>
          <button data-atlas-tab="rulers" class="atlas-tab inactive">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 11l4-7 5 4 5-4 4 7-9 10z"></path>
            </svg>
            <span class="atlas-tab-text">Rulers</span>
          </button>
          <button data-atlas-tab="people" class="atlas-tab inactive">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="7" r="3"></circle>
              <circle cx="17" cy="7" r="3"></circle>
              <path d="M2 21v-1a4 4 0 0 1 4-4h6"></path>
              <path d="M14 21v-1a4 4 0 0 1 4-4h0a4 4 0 0 1 4 4v1"></path>
            </svg>
            <span class="atlas-tab-text">People</span>
          </button>
          <button data-atlas-tab="battles" class="atlas-tab inactive">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.5 17.5L3 6l3-3 11.5 11.5"></path>
              <path d="M13 19l2 2 6-6-2-2z"></path>
            </svg>
            <span class="atlas-tab-text">Battles</span>
          </button>
        </div>

        <div class="atlas-content-area">
          <div id="atlas-content" class="atlas-content"></div>
        </div>
      </section>

      <section id="timeline-container" class="timeline-container">
        <div class="timeline-slider-container">
          <div id="timeline-indicator" class="timeline-indicator">
            <div id="timeline-year" class="timeline-year">2025</div>
            <div class="timeline-indicator-line"></div>
          </div>
          <input id="year-slider" type="range" min="800" max="2026" value="1780" class="year-slider" />
          <div id="timeline-ticks" class="timeline-ticks"></div>
        </div>

        <div class="timeline-labels">
          <span>800</span>
          <span>900</span>
          <span>1000</span>
          <span>1100</span>
          <span>1200</span>
          <span>1300</span>
          <span>1400</span>
          <span>1500</span>
          <span>1600</span>
          <span>1700</span>
          <span>1800</span>
          <span>1900</span>
          <span class="auto-year"></span>
        </div>
        

      </section>


    </main>
  </div>

  <div id="auth-modal" class="auth-modal hidden">
    <div class="auth-content">
      <div class="auth-header">
        <h2>Account</h2>
        <button class="auth-close" onclick="closeAuthModal()">&times;</button>
      </div>
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
        <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
      </div>
      <form id="login-form" class="auth-form">
        <input type="email" placeholder="Email" required>
        <input type="password" placeholder="Password" required>
        <button type="submit" class="auth-submit">Login</button>
        <div class="auth-error" id="login-error"></div>
      </form>
      <form id="signup-form" class="auth-form" style="display: none;">
        <input type="text" placeholder="Full Name" required>
        <input type="email" placeholder="Email" required>
        <input type="password" placeholder="Password" required>
        <div class="location-row">
          <input type="text" placeholder="City" required>
          <input type="text" placeholder="Country" required>
        </div>
        <button type="submit" class="auth-submit">Sign Up</button>
        <div class="auth-error" id="signup-error"></div>
      </form>
    </div>
  </div>

  <script src="./auth/auth.js"></script>
  <script src="./auth/auth-ui.js"></script>
  <script>
    // Update cart count on page load
    document.addEventListener('DOMContentLoaded', function() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const count = cart.reduce((total, item) => total + item.quantity, 0);
      const cartCountEl = document.getElementById('cart-count');
      if (cartCountEl) cartCountEl.textContent = count;
    });
  </script>
  <script src="./map/app.js"></script>
</body>

</html>